<div class="dashboard fade-in">
    <div class="dashboard-header">
        <div class="header-content">
            <h1 class="header-title">
                <span class="wave">👋</span>
                Welcome to GraphoMatch
            </h1>
            <p class="header-subtitle">Your comprehensive admin dashboard for handwriting analysis platform</p>
        </div>
        <div class="header-decoration">
            <div class="floating-icon">🧠</div>
            <div class="floating-icon delay-1">✍️</div>
            <div class="floating-icon delay-2">📊</div>
        </div>
    </div>

    <div *ngIf="dashboardData$ | async as data">
        <div class="stats-grid">
            <div class="stat-card slide-in-up" style="animation-delay: 0.1s">
                <div class="stat-icon-wrapper users">
                    <div class="stat-icon">👥</div>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number">{{ data.totalUsers }}</h3>
                    <p class="stat-label">Total Users</p>
                </div>
            </div>


            <div class="stat-card slide-in-up" style="animation-delay: 0.2s">
                <div class="stat-icon-wrapper jobs">
                    <div class="stat-icon">💼</div>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number">{{ data.totalJobs }}</h3>
                    <p class="stat-label">Job Listings</p>
                </div>
            </div>

            <div class="stat-card slide-in-up" style="animation-delay: 0.3s">
                <div class="stat-icon-wrapper analyses">
                    <div class="stat-icon">📝</div>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number">{{ data.totalAnalyses }}</h3>
                    <p class="stat-label">Analyses Completed</p>
                    <span class="stat-change neutral">
                        <span class="change-icon">→</span>
                        {{ data.averageAnalysesPerUser }} avg per user
                    </span>
                </div>
            </div>

            <div class="stat-card slide-in-up" style="animation-delay: 0.4s">
                <div class="stat-icon-wrapper applications">
                    <div class="stat-icon">📊</div>
                </div>
                <div class="stat-content">
                    <h3 class="stat-number">{{ data.totalApplications }}</h3>
                    <p class="stat-label">Job Applications</p>
                    <span class="stat-change positive">
                        <span class="change-icon">↗</span>
                        {{ data.averageApplicationsPerJob }} avg per job
                    </span>
                </div>
            </div>
            <!-- User Feedback Section -->
            <div class="feedback-section slide-in-up" style="animation-delay: 0.5s">
                <div class="card feedback-card">
                    <div class="card-header">
                        <div class="header-left">
                            <h3 class="card-title">
                                <span class="title-icon">💬</span>
                                User Feedback
                            </h3>
                            <div class="feedback-stats">
                                <div class="stat-item">
                                    <span class="stat-icon">📝</span>
                                    <span class="stat-value">{{ feedbacks.length || 0 }}</span>
                                    <span class="stat-label">Total Reviews</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    @if(feedbacks.length > 0) {
                    <div class="feedback-list">
                        @for (item of feedbacks; track item.id) {
                        <div class="feedback-item">
                            <div class="feedback-header">
                                @if(item.user) {
                                <div class="user-info">
                                    <div class="user-avatar">{{ getUserInitials(item.user.name) }}</div>
                                    <div class="user-details">
                                        <div class="user-name">{{ item.user.name ||'' }}</div>
                                        <div class="user-email">{{ item.user.email || '' }}</div>
                                    </div>
                                </div>
                                }
                                <div class="feedback-meta">
                                    <div class="feedback-time">{{ item.createdAt | date:'short' }}</div>
                                </div>
                            </div>

                            <div class="feedback-content">
                                <p class="feedback-comment">{{ item.content }}</p>
                            </div>
                        </div>
                        }

                        @if (feedbacks.length===0) {
                        <div class="no-feedback">
                            <div class="no-feedback-icon">💭</div>
                            <h4>No feedback yet</h4>
                            <p>User feedback will appear here once submitted</p>
                        </div>
                        }
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>